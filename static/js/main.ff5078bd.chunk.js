(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{15:function(e,t,a){e.exports={container:"MoviesPageView_container__11pun",headBlock:"MoviesPageView_headBlock__1mWdC",formBar:"MoviesPageView_formBar__19t6C"}},19:function(e,t,a){e.exports={AppBar:"App_AppBar__E-uqS",NavLink:"App_NavLink__1tX2s",active:"App_active__eYtTS"}},21:function(e,t,a){e.exports={"MoviePreview-thumb":"MoviePreview_MoviePreview-thumb__1K5ai","MoviePreview-titleBlock":"MoviePreview_MoviePreview-titleBlock__JUGv0","MoviePreview-title":"MoviePreview_MoviePreview-title__2o5eU"}},22:function(e,t,a){e.exports={cast:"Cast_cast__1Cuiw",castItem:"Cast_castItem__1yTVp",pic:"Cast_pic__1GTBv",name:"Cast_name__11PK3"}},23:function(e,t,a){e.exports={MovieDetails:"MovieDetailsPageView_MovieDetails__w972_",description:"MovieDetailsPageView_description__cGngn",genres:"MovieDetailsPageView_genres__2ywdv",backBtn:"MovieDetailsPageView_backBtn__2WDeE"}},28:function(e,t,a){e.exports={moviesList:"MoviesList_moviesList__3rZPk"}},43:function(e,t,a){e.exports={NavLink:"base_NavLink__f9qMD","NavLink--active":"base_NavLink--active__1hgQ8"}},72:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(9),r=a(37),i=a.n(r),o=(a(43),a(4)),l=a(2),j="/",v="/movies",u="/movies/:movieId",h=a(19),m=a.n(h),p=a(0),d=function(){return Object(p.jsxs)("nav",{className:m.a.AppBar,children:[Object(p.jsx)(s.c,{exact:!0,to:j,className:m.a.NavLink,activeClassName:m.a.active,children:"Home"}),Object(p.jsx)(s.c,{to:v,className:m.a.NavLink,activeClassName:m.a.active,children:"Movies"})]})},b=function(){return Object(p.jsx)("header",{children:Object(p.jsx)(d,{})})},O=a(14),f=a.n(O),x=a(17),_=a(10),g=a(11),w=a(13),k=a(12),N=a(18),y=a.n(N),M=a(21),S=a.n(M),P=function(e){var t=e.poster_path,a=e.title,c=e.release_date;return Object(p.jsxs)("div",{className:S.a["MoviePreview-thumb"],children:[Object(p.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(t),alt:a}),Object(p.jsxs)("div",{className:S.a["MoviePreview-titleBlock"],children:[Object(p.jsx)("h5",{className:S.a["MoviePreview-title"],children:"".concat(a)}),c&&Object(p.jsx)("h5",{className:S.a["MoviePreview-title"],children:"(".concat(c.slice(0,4),")")})]})]})},C=a(28),B=a.n(C),I=Object(l.f)((function(e){var t=e.movies,a=e.location;return Object(p.jsx)("ul",{className:B.a.moviesList,children:t.map((function(e){var t=e.id,c=e.poster_path,n=e.title,r=e.release_date;return Object(p.jsx)("li",{className:B.a.item,children:Object(p.jsx)(s.b,{to:{pathname:"/movies/".concat(t),state:{from:a}},children:Object(p.jsx)(P,{poster_path:c,title:n,release_date:r})})},t)}))})})),V=a(15),A=a.n(V),L=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(_.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={movies:[]},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(f.a.mark((function e(){var t,a,c,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.API,c=t.mainUrl,e.next=3,y.a.get("".concat(c,"/trending/movie/week?api_key=").concat(a));case 3:n=e.sent,this.setState({movies:n.data.results}),localStorage.removeItem("movies"),localStorage.removeItem("formValue");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.movies;return Object(p.jsxs)("div",{className:A.a.container,children:[Object(p.jsx)("h1",{className:A.a.headBlock,children:"Trending today"}),Object(p.jsx)("div",{children:Object(p.jsx)(I,{movies:e})})]})}}]),a}(c.Component),D=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(_.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={formValue:"",movies:[],status:"idle"},e.handleChange=function(t){var a=t.currentTarget.value;e.setState({formValue:a.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),e.setState({status:"pending"})},e.handleClear=function(){e.setState({formValue:"",movies:[],status:"idle"}),localStorage.removeItem("movies"),localStorage.removeItem("formValue")},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("movies"),t=localStorage.getItem("formValue"),a=JSON.parse(e),c=JSON.parse(t);a&&(this.setState({movies:a}),this.setState({formValue:c}))}},{key:"componentDidUpdate",value:function(){var e=Object(x.a)(f.a.mark((function e(){var t,a,c,n,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.API,c=t.mainUrl,n=this.state,s=n.formValue,"pending"!==n.status||0===s.length){e.next=9;break}return e.next=5,y.a.get("".concat(c,"/search/movie?api_key=").concat(a,"&language=en-US&query=").concat(s,"&page=1&include_adult=false"));case 5:r=e.sent,this.setState({movies:r.data.results,status:"resolved"}),localStorage.setItem("movies",JSON.stringify(r.data.results)),localStorage.setItem("formValue",JSON.stringify(s));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.movies;return Object(p.jsxs)("div",{className:A.a.container,children:[Object(p.jsx)("div",{className:A.a.headBlock,children:Object(p.jsxs)("form",{className:A.a.formBar,onSubmit:this.handleSubmit,children:[Object(p.jsx)("button",{type:"button",onClick:this.handleClear,children:"Clear"}),Object(p.jsx)("input",{type:"text",name:"name",value:this.state.formValue,onChange:this.handleChange}),Object(p.jsx)("button",{type:"submit",children:"Search"})]})}),Object(p.jsx)(I,{movies:e})]})}}]),a}(c.Component),U=a(22),J=a.n(U),G=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.cast;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("ul",{className:J.a.cast,children:e.map((function(e){var t=e.id,a=e.original_name,c=e.profile_path;return Object(p.jsxs)("li",{className:J.a.castItem,children:[Object(p.jsx)("img",{className:J.a.pic,src:"https://image.tmdb.org/t/p/w500".concat(c),alt:""}),Object(p.jsx)("p",{className:J.a.name,children:a})]},t)}))})})}}]),a}(c.Component),T=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.reviews;return Object(p.jsxs)(p.Fragment,{children:[0===e.length&&"We don't have any reviews for this movie",Object(p.jsx)("ul",{children:e.map((function(e){var t=e.id,a=e.author,c=e.content;return Object(p.jsxs)("li",{children:[Object(p.jsx)("h3",{children:"Author: ".concat(a)}),Object(p.jsx)("p",{children:c})]},t)}))})]})}}]),a}(c.Component),F=a(23),q=a.n(F),E=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(_.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={title:"",genres:[],overview:"",release_date:"",vote_average:"",poster_path:"",cast:[],reviews:[]},e.handleGoBack=function(){var t=e.props,a=t.history,c=t.location;if(c.state&&c.state.from)return a.push(c.state.from);a.push(v)},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(f.a.mark((function e(){var t,a,c,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.API,c=t.mainUrl,n=this.props.match.params.movieId,"append_to_response=credits,reviews",e.next=5,y.a.get("".concat(c,"/movie/").concat(n,"?api_key=").concat(a,"&").concat("append_to_response=credits,reviews","&language=en-US"));case 5:s=e.sent,this.setState(Object(o.a)(Object(o.a)({},s.data),{},{poster_path:"https://image.tmdb.org/t/p/w300"+s.data.poster_path,cast:s.data.credits.cast,reviews:s.data.reviews.results}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.title,a=e.release_date,c=e.genres,n=e.poster_path,r=e.overview,i=e.vote_average,j=e.cast,v=e.reviews,u=this.props.movies,h=this.props.match,m=h.url,d=h.path,b=n,O=10*i+"%";return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{className:q.a.backBtn,type:"button",onClick:this.handleGoBack,movies:u,children:"\u041d\u0430\u0437\u0430\u0434"}),t&&Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:q.a.MovieDetails,children:[Object(p.jsx)("img",{src:"".concat(b),alt:"poster ".concat(t)}),Object(p.jsxs)("div",{className:q.a.description,children:[Object(p.jsx)("h1",{children:"".concat(t," (").concat(a?a.slice(0,4):"Coming soon",")")}),i?Object(p.jsx)("p",{children:"User score: ".concat(O)}):"",r&&Object(p.jsx)("h3",{children:"Overview"}),Object(p.jsx)("p",{children:r}),Object(p.jsx)("h4",{children:"Genres"}),Object(p.jsx)("ul",{className:q.a.genres,children:c.map((function(e){var t=e.id,a=e.name;return Object(p.jsx)("li",{children:a},t)}))})]})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("p",{children:"Addidition information"}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(s.c,{to:"".concat(m,"/cast"),className:"NavLink",activeClassName:"NavLink--active",children:"Cast"})}),Object(p.jsx)("li",{children:Object(p.jsx)(s.c,{to:"".concat(m,"/reviews"),className:"NavLink",activeClassName:"NavLink--active",children:"Reviews"})})]}),Object(p.jsx)("hr",{}),Object(p.jsx)(l.a,{path:"".concat(d,"/cast"),render:function(e){return Object(p.jsx)(G,Object(o.a)(Object(o.a)({},e),{},{cast:j}))}}),Object(p.jsx)(l.a,{path:"".concat(d,"/reviews"),render:function(e){return Object(p.jsx)(T,Object(o.a)(Object(o.a)({},e),{},{reviews:v}))}})]})]})}}]),a}(c.Component),W=function(){return Object(p.jsx)("h1",{className:A.a.headBlock,children:"Sorry, but this page not found"})},K="4f24a465004dec8d1f65f162bb769c3a",H="https://api.themoviedb.org/3",Q=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b,{}),Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{exact:!0,path:j,render:function(e){return Object(p.jsx)(L,Object(o.a)(Object(o.a)({},e),{},{API:K,mainUrl:H}))}}),Object(p.jsx)(l.a,{exact:!0,path:v,render:function(e){return Object(p.jsx)(D,Object(o.a)(Object(o.a)({},e),{},{API:K,mainUrl:H}))}}),Object(p.jsx)(l.a,{path:u,render:function(e){return Object(p.jsx)(E,Object(o.a)(Object(o.a)({},e),{},{API:K,mainUrl:H}))}}),Object(p.jsx)(l.a,{component:W})]})]})};i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(s.a,{children:Object(p.jsx)(Q,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.ff5078bd.chunk.js.map